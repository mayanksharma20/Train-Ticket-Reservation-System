
-- Create the database if it doesn't exist
CREATE DATABASE IF NOT EXISTS RESERVATION;
-- Use the database
USE RESERVATION;

-- Create the tables
CREATE TABLE CUSTOMER (
    MAILID VARCHAR(40) PRIMARY KEY, 
    PWORD VARCHAR(20) NOT NULL, 
    FNAME VARCHAR(20) NOT NULL, 
    LNAME VARCHAR(20), 
    ADDR VARCHAR(100), 
    PHNO BIGINT(12) NOT NULL
);

CREATE TABLE ADMIN (
    MAILID VARCHAR(40) PRIMARY KEY, 
    PWORD VARCHAR(20) NOT NULL, 
    FNAME VARCHAR(20) NOT NULL, 
    LNAME VARCHAR(20), 
    ADDR VARCHAR(100), 
    PHNO BIGINT(12) NOT NULL
);

CREATE TABLE TRAIN (
    TR_NO INT(10) PRIMARY KEY, 
    TR_NAME VARCHAR(70) NOT NULL, 
    FROM_STN VARCHAR(20) NOT NULL, 
    TO_STN VARCHAR(20) NOT NULL, 
    SEATS INT(4) NOT NULL, 
    FARE DECIMAL(6,2) NOT NULL 
);

CREATE TABLE HISTORY (
    TRANSID VARCHAR(36) PRIMARY KEY, 
    MAILID VARCHAR(40), 
    TR_NO INT(10),
    DATE DATE,
    FROM_STN VARCHAR(20) NOT NULL, 
    TO_STN VARCHAR(20) NOT NULL, 
    SEATS INT(3) NOT NULL, 
    AMOUNT DECIMAL(8,2) NOT NULL,
    FOREIGN KEY (MAILID) REFERENCES CUSTOMER(MAILID)
);

-- Insert data into tables
INSERT INTO ADMIN VALUES('admin@demo.com','admin','System','Admin','Demo Address 123 colony',9874561230);
INSERT INTO CUSTOMER VALUES('shashi@demo.com','shashi','Shashi','Raj','Kolkata, West Bengal',954745222);

INSERT INTO TRAIN VALUES(10001,'JODHPUR EXP','HOWRAH','JODHPUR', 152, 490.50);
INSERT INTO TRAIN VALUES(10002,'YAMUNA EXP','GAYA','DELHI', 52, 550.50);
INSERT INTO TRAIN VALUES(10003,'NILANCHAL EXP','GAYA','HOWRAH', 92, 451);
INSERT INTO TRAIN VALUES(10004,'JAN SATABDI EXP','RANCHI','PATNA', 182, 550);
INSERT INTO TRAIN VALUES(10005,'GANGE EXP','MUMBAI','KERALA', 12, 945);
INSERT INTO TRAIN VALUES(10006,'GARIB RATH EXP','PATNA','DELHI', 1, 1450.75);

INSERT INTO HISTORY VALUES('BBC374-NSDF-4673','shashi@demo.com',10001,'2024-02-02', 'HOWRAH', 'JODHPUR', 2, 981);
INSERT INTO HISTORY VALUES('BBC375-NSDF-4675','shashi@demo.com',10004,'2024-01-12', 'RANCHI', 'PATNA', 1, 550);
INSERT INTO HISTORY VALUES('BBC373-NSDF-4674','shashi@demo.com',10006,'2024-07-22', 'PATNA', 'DELHI', 3, 4352.25);

select * from train;
